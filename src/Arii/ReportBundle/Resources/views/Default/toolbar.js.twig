myToolbar = globalLayout.cells("b").attachToolbar();
myToolbar.setIconsPath("{{ asset('bundles/ariicore/images/toolbar/') }}");
myToolbar.loadStruct("{{ url('xml_Report_toolbar') }}?app="+app+"&day_past="+day_past, function() {
    this.setItemText("APP",this.getListOptionText("APP",this.getListOptionSelected("APP")));
    this.setItemText("ENV",this.getListOptionText("ENV",this.getListOptionSelected("ENV")));
    this.setItemText("DAY_PAST",this.getListOptionText("DAY_PAST",this.getListOptionSelected("DAY_PAST")));
    this.setItemText("DAY",this.getListOptionText("DAY",this.getListOptionSelected("DAY")));
    this.setItemText("MONTH",this.getListOptionText("MONTH",this.getListOptionSelected("MONTH")));
});
myToolbar.attachEvent( "onClick", function(id, value) {
    var parent=this.getParentId(id);
    switch (parent) {
        case "APP":
            if (id=='_APP_') {
                this.setItemText("APP",'{{ "All applications" | trans }}');
                app = '*';
            }
            else {
                this.setItemText("APP",this.getListOptionText("APP",this.getListOptionSelected("APP")));
                app = id;
            }
            dhx4.ajax.get( "{{ url('arii_session_update') }}?app="+app, function() {
                GlobalRefresh();
            });            
            break;
        case "ENV":
            if (id=='_ENV_') {
                this.setItemText("ENV",'{{ "All environments" | trans }}');
                env = '*';
            }
            else {
                this.setItemText("ENV",this.getListOptionText("ENV",this.getListOptionSelected("ENV")));
                env = id;
            }
            dhx4.ajax.get( "{{ url('arii_session_update') }}?env="+env, function() {
                GlobalRefresh();
            });            
            break;
        case "JOB_CLASS":
            if (id=='_JCL_') {
                this.setItemText("JOB_CLASS",'{{ "All types" | trans }}');
                job_class = '*';
            }
            else {
                this.setItemText("JOB_CLASS",this.getListOptionText("JOB_CLASS",this.getListOptionSelected("JOB_CLASS")));
                job_class = id;
            }
            dhx4.ajax.get( "{{ url('arii_session_update') }}?job_class="+job_class, function() {
                GlobalRefresh();
            });
            break;
        case "DAY":
            day = id.substr(1);
            this.setItemText("DAY",this.getListOptionText("DAY",this.getListOptionSelected("DAY")));
            dhx4.ajax.get( "{{ url('arii_session_update') }}?day="+day, function() {
                GlobalRefresh();
            });
            break;
        case "MONTH":
            this.setItemText("MONTH",this.getListOptionText("MONTH",this.getListOptionSelected("MONTH")));
            month = id;
            dhx4.ajax.get( "{{ url('arii_session_update') }}?month="+month, function() {
                GlobalRefresh();
            });
            break;
        case "YEAR":
            this.setItemText("YEAR",this.getListOptionText("YEAR",this.getListOptionSelected("YEAR")));
            year = id;
            dhx4.ajax.get( "{{ url('arii_session_update') }}?year="+year, function() {
                GlobalRefresh();
            });
            break;
        case "DAY_PAST":
            this.setItemText("DAY_PAST",this.getListOptionText("DAY_PAST",this.getListOptionSelected("DAY_PAST")));
            day_past = id;
            GlobalRefresh();
            break;
        default:
//                alert(id);
            GlobalRefresh();
    }
});
